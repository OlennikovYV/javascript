function crap(x, bags, cap) {
  const garden = x.flat(1);
  const countCrap = garden.filter(g => g === '@').length;
  const countDog = garden.filter(g => g === 'D').length;

  if (countDog > 0) return 'Dog!!';
  if (countCrap === 0) return 'Clean';
  if (bags === 0) return 'Cr@p';
  if (cap === 0) return 'Cr@p';
  if (countCrap > bags * cap) return 'Cr@p';

  return 'Clean';
}

console.log(
  crap(
    [
      ['_', '_', '_', '_'],
      ['_', '_', '_', '@'],
      ['_', '_', '@', '_'],
    ],
    2,
    2
  )
); // 'Clean'
console.log(
  crap(
    [
      ['_', '_', '_', '_'],
      ['_', '_', '_', '@'],
      ['_', '_', '@', '_'],
    ],
    1,
    1
  )
); // 'Cr@p'
console.log(
  crap(
    [
      ['_', '_'],
      ['_', '@'],
      ['D', '_'],
    ],
    2,
    2
  )
); // 'Dog!!'
console.log(
  crap(
    [
      [
        '_',
        '_',
        'D',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '@',
        '_',
        '@',
        '_',
        '_',
        '_',
        '_',
      ],
      [
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '@',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '@',
        '_',
        'D',
      ],
      [
        '_',
        '_',
        '_',
        '_',
        '@',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
      ],
    ],
    3,
    0
  )
); // 'Cr@p'
console.log(
  crap(
    [
      [
        '_',
        '_',
        '_',
        'D',
        '_',
        '_',
        '@',
        '_',
        '@',
        'D',
        '_',
        '_',
        '_',
        '_',
        '@',
        '_',
        '_',
        'D',
        '_',
        '_',
        '_',
        '_',
        '_',
      ],
      [
        '@',
        '_',
        'D',
        '_',
        '_',
        '_',
        '@',
        '_',
        '_',
        '@',
        '_',
        '_',
        '@',
        '_',
        '_',
        '@',
        '_',
        '_',
        'D',
        '@',
        '_',
        '@',
        '_',
      ],
      [
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '@',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        '_',
        'D',
        'D',
        '_',
        '_',
        '@',
        '_',
        '_',
      ],
    ],
    4,
    9
  )
); // 'Dog!!'
console.log(
  crap(
    [
      ['@', '_', '_', '@', '_', '@', '@', '@', '_', '_', '_', '_'],
      ['_', '@', '_', '_', '_', 'D', '_', 'D', '_', '_', '_', '_'],
      ['_', '_', '@', '_', '_', '_', '_', '_', '_', '_', '_', '_'],
    ],
    7,
    8
  )
); // 'Dog!!'
console.log(
  crap(
    [
      ['_', '_', '@', '_', '@', '_', '_', '_'],
      ['_', '_', '_', '_', '_', '_', '_', '_'],
      ['_', '_', '_', '_', '_', '_', '_', '_'],
    ],
    9,
    8
  )
); // 'Clean'
console.log(
  crap(
    [
      ['_', '_', '_', '@', '@'],
      ['_', '_', '_', '_', '_'],
      ['_', '_', '_', '@', '_'],
    ],
    5,
    6
  )
); // 'Clean'
console.log(
  crap(
    [
      ['_', '_', '_', '_', '_', '_', '_', '_', '@', '_'],
      ['_', '@', '_', '_', '_', '_', '_', '_', '_', '_'],
      ['_', '_', '_', '_', '_', '@', '_', '_', '_', '_'],
    ],
    5,
    0
  )
); // 'Cr@p'
console.log(
  crap(
    [
      ['@', '_', '_', '@', '_'],
      ['_', '_', '_', '_', '@'],
      ['_', '_', '_', '_', '@'],
    ],
    3,
    9
  )
); // 'Clean'
